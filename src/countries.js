/**
  A list of countries with their appropriate flags (emojis),
  keyed by the country ISO code
*/
const COUNTRIES = {
  "AC":{"name":"Ascension Island","flag":"ğŸ‡¦ğŸ‡¨","code":"AC"},
  "AD":{"name":"Andorra","flag":"ğŸ‡¦ğŸ‡©","code":"AD"},
  "AE":{"name":"United Arab Emirates","flag":"ğŸ‡¦ğŸ‡ª","code":"AE"},
  "AF":{"name":"Afghanistan","flag":"ğŸ‡¦ğŸ‡«","code":"AF"},
  "AG":{"name":"Antigua & Barbuda","flag":"ğŸ‡¦ğŸ‡¬","code":"AG"},
  "AI":{"name":"Anguilla","flag":"ğŸ‡¦ğŸ‡®","code":"AI"},
  "AL":{"name":"Albania","flag":"ğŸ‡¦ğŸ‡±","code":"AL"},
  "AM":{"name":"Armenia","flag":"ğŸ‡¦ğŸ‡²","code":"AM"},
  "AO":{"name":"Angola","flag":"ğŸ‡¦ğŸ‡´","code":"AO"},
  "AQ":{"name":"Antarctica","flag":"ğŸ‡¦ğŸ‡¶","code":"AQ"},
  "AR":{"name":"Argentina","flag":"ğŸ‡¦ğŸ‡·","code":"AR"},
  "AS":{"name":"American Samoa","flag":"ğŸ‡¦ğŸ‡¸","code":"AS"},
  "AT":{"name":"Austria","flag":"ğŸ‡¦ğŸ‡¹","code":"AT"},
  "AU":{"name":"Australia","flag":"ğŸ‡¦ğŸ‡º","code":"AU"},
  "AW":{"name":"Aruba","flag":"ğŸ‡¦ğŸ‡¼","code":"AW"},
  "AX":{"name":"Ã…land Islands","flag":"ğŸ‡¦ğŸ‡½","code":"AX"},
  "AZ":{"name":"Azerbaijan","flag":"ğŸ‡¦ğŸ‡¿","code":"AZ"},
  "BA":{"name":"Bosnia & Herzegovina","flag":"ğŸ‡§ğŸ‡¦","code":"BA"},
  "BB":{"name":"Barbados","flag":"ğŸ‡§ğŸ‡§","code":"BB"},
  "BD":{"name":"Bangladesh","flag":"ğŸ‡§ğŸ‡©","code":"BD"},
  "BE":{"name":"Belgium","flag":"ğŸ‡§ğŸ‡ª","code":"BE"},
  "BF":{"name":"Burkina Faso","flag":"ğŸ‡§ğŸ‡«","code":"BF"},
  "BG":{"name":"Bulgaria","flag":"ğŸ‡§ğŸ‡¬","code":"BG"},
  "BH":{"name":"Bahrain","flag":"ğŸ‡§ğŸ‡­","code":"BH"},
  "BI":{"name":"Burundi","flag":"ğŸ‡§ğŸ‡®","code":"BI"},
  "BJ":{"name":"Benin","flag":"ğŸ‡§ğŸ‡¯","code":"BJ"},
  "BL":{"name":"St. BarthÃ©lemy","flag":"ğŸ‡§ğŸ‡±","code":"BL"},
  "BM":{"name":"Bermuda","flag":"ğŸ‡§ğŸ‡²","code":"BM"},
  "BN":{"name":"Brunei","flag":"ğŸ‡§ğŸ‡³","code":"BN"},
  "BO":{"name":"Bolivia","flag":"ğŸ‡§ğŸ‡´","code":"BO"},
  "BQ":{"name":"Caribbean Netherlands","flag":"ğŸ‡§ğŸ‡¶","code":"BQ"},
  "BR":{"name":"Brazil","flag":"ğŸ‡§ğŸ‡·","code":"BR"},
  "BS":{"name":"Bahamas","flag":"ğŸ‡§ğŸ‡¸","code":"BS"},
  "BT":{"name":"Bhutan","flag":"ğŸ‡§ğŸ‡¹","code":"BT"},
  "BV":{"name":"Bouvet Island","flag":"ğŸ‡§ğŸ‡»","code":"BV"},
  "BW":{"name":"Botswana","flag":"ğŸ‡§ğŸ‡¼","code":"BW"},
  "BY":{"name":"Belarus","flag":"ğŸ‡§ğŸ‡¾","code":"BY"},
  "BZ":{"name":"Belize","flag":"ğŸ‡§ğŸ‡¿","code":"BZ"},
  "CA":{"name":"Canada","flag":"ğŸ‡¨ğŸ‡¦","code":"CA"},
  "CC":{"name":"Cocos (Keeling) Islands","flag":"ğŸ‡¨ğŸ‡¨","code":"CC"},
  "CD":{"name":"Congo - Kinshasa","flag":"ğŸ‡¨ğŸ‡©","code":"CD"},
  "CF":{"name":"Central African Republic","flag":"ğŸ‡¨ğŸ‡«","code":"CF"},
  "CG":{"name":"Congo - Brazzaville","flag":"ğŸ‡¨ğŸ‡¬","code":"CG"},
  "CH":{"name":"Switzerland","flag":"ğŸ‡¨ğŸ‡­","code":"CH"},
  "CI":{"name":"CÃ´te dâ€™Ivoire","flag":"ğŸ‡¨ğŸ‡®","code":"CI"},
  "CK":{"name":"Cook Islands","flag":"ğŸ‡¨ğŸ‡°","code":"CK"},
  "CL":{"name":"Chile","flag":"ğŸ‡¨ğŸ‡±","code":"CL"},
  "CM":{"name":"Cameroon","flag":"ğŸ‡¨ğŸ‡²","code":"CM"},
  "CN":{"name":"China","flag":"ğŸ‡¨ğŸ‡³","code":"CN"},
  "CO":{"name":"Colombia","flag":"ğŸ‡¨ğŸ‡´","code":"CO"},
  "CP":{"name":"Clipperton Island","flag":"ğŸ‡¨ğŸ‡µ","code":"CP"},
  "CR":{"name":"Costa Rica","flag":"ğŸ‡¨ğŸ‡·","code":"CR"},
  "CU":{"name":"Cuba","flag":"ğŸ‡¨ğŸ‡º","code":"CU"},
  "CV":{"name":"Cape Verde","flag":"ğŸ‡¨ğŸ‡»","code":"CV"},
  "CW":{"name":"CuraÃ§ao","flag":"ğŸ‡¨ğŸ‡¼","code":"CW"},
  "CX":{"name":"Christmas Island","flag":"ğŸ‡¨ğŸ‡½","code":"CX"},
  "CY":{"name":"Cyprus","flag":"ğŸ‡¨ğŸ‡¾","code":"CY"},
  "CZ":{"name":"Czechia","flag":"ğŸ‡¨ğŸ‡¿","code":"CZ"},
  "DE":{"name":"Germany","flag":"ğŸ‡©ğŸ‡ª","code":"DE"},
  "DG":{"name":"Diego Garcia","flag":"ğŸ‡©ğŸ‡¬","code":"DG"},
  "DJ":{"name":"Djibouti","flag":"ğŸ‡©ğŸ‡¯","code":"DJ"},
  "DK":{"name":"Denmark","flag":"ğŸ‡©ğŸ‡°","code":"DK"},
  "DM":{"name":"Dominica","flag":"ğŸ‡©ğŸ‡²","code":"DM"},
  "DO":{"name":"Dominican Republic","flag":"ğŸ‡©ğŸ‡´","code":"DO"},
  "DZ":{"name":"Algeria","flag":"ğŸ‡©ğŸ‡¿","code":"DZ"},
  "EA":{"name":"Ceuta & Melilla","flag":"ğŸ‡ªğŸ‡¦","code":"EA"},
  "EC":{"name":"Ecuador","flag":"ğŸ‡ªğŸ‡¨","code":"EC"},
  "EE":{"name":"Estonia","flag":"ğŸ‡ªğŸ‡ª","code":"EE"},
  "EG":{"name":"Egypt","flag":"ğŸ‡ªğŸ‡¬","code":"EG"},
  "EH":{"name":"Western Sahara","flag":"ğŸ‡ªğŸ‡­","code":"EH"},
  "ER":{"name":"Eritrea","flag":"ğŸ‡ªğŸ‡·","code":"ER"},
  "ES":{"name":"Spain","flag":"ğŸ‡ªğŸ‡¸","code":"ES"},
  "ET":{"name":"Ethiopia","flag":"ğŸ‡ªğŸ‡¹","code":"ET"},
  "EU":{"name":"European Union","flag":"ğŸ‡ªğŸ‡º","code":"EU"},
  "FI":{"name":"Finland","flag":"ğŸ‡«ğŸ‡®","code":"FI"},
  "FJ":{"name":"Fiji","flag":"ğŸ‡«ğŸ‡¯","code":"FJ"},
  "FK":{"name":"Falkland Islands","flag":"ğŸ‡«ğŸ‡°","code":"FK"},
  "FM":{"name":"Micronesia","flag":"ğŸ‡«ğŸ‡²","code":"FM"},
  "FO":{"name":"Faroe Islands","flag":"ğŸ‡«ğŸ‡´","code":"FO"},
  "FR":{"name":"France","flag":"ğŸ‡«ğŸ‡·","code":"FR"},
  "GA":{"name":"Gabon","flag":"ğŸ‡¬ğŸ‡¦","code":"GA"},
  "GB":{"name":"United Kingdom","flag":"ğŸ‡¬ğŸ‡§","code":"GB"},
  "GD":{"name":"Grenada","flag":"ğŸ‡¬ğŸ‡©","code":"GD"},
  "GE":{"name":"Georgia","flag":"ğŸ‡¬ğŸ‡ª","code":"GE"},
  "GF":{"name":"French Guiana","flag":"ğŸ‡¬ğŸ‡«","code":"GF"},
  "GG":{"name":"Guernsey","flag":"ğŸ‡¬ğŸ‡¬","code":"GG"},
  "GH":{"name":"Ghana","flag":"ğŸ‡¬ğŸ‡­","code":"GH"},
  "GI":{"name":"Gibraltar","flag":"ğŸ‡¬ğŸ‡®","code":"GI"},
  "GL":{"name":"Greenland","flag":"ğŸ‡¬ğŸ‡±","code":"GL"},
  "GM":{"name":"Gambia","flag":"ğŸ‡¬ğŸ‡²","code":"GM"},
  "GN":{"name":"Guinea","flag":"ğŸ‡¬ğŸ‡³","code":"GN"},
  "GP":{"name":"Guadeloupe","flag":"ğŸ‡¬ğŸ‡µ","code":"GP"},
  "GQ":{"name":"Equatorial Guinea","flag":"ğŸ‡¬ğŸ‡¶","code":"GQ"},
  "GR":{"name":"Greece","flag":"ğŸ‡¬ğŸ‡·","code":"GR"},
  "GS":{"name":"South Georgia & South Sandwich Islands","flag":"ğŸ‡¬ğŸ‡¸","code":"GS"},
  "GT":{"name":"Guatemala","flag":"ğŸ‡¬ğŸ‡¹","code":"GT"},
  "GU":{"name":"Guam","flag":"ğŸ‡¬ğŸ‡º","code":"GU"},
  "GW":{"name":"Guinea-Bissau","flag":"ğŸ‡¬ğŸ‡¼","code":"GW"},
  "GY":{"name":"Guyana","flag":"ğŸ‡¬ğŸ‡¾","code":"GY"},
  "HK":{"name":"Hong Kong SAR China","flag":"ğŸ‡­ğŸ‡°","code":"HK"},
  "HM":{"name":"Heard & McDonald Islands","flag":"ğŸ‡­ğŸ‡²","code":"HM"},
  "HN":{"name":"Honduras","flag":"ğŸ‡­ğŸ‡³","code":"HN"},
  "HR":{"name":"Croatia","flag":"ğŸ‡­ğŸ‡·","code":"HR"},
  "HT":{"name":"Haiti","flag":"ğŸ‡­ğŸ‡¹","code":"HT"},
  "HU":{"name":"Hungary","flag":"ğŸ‡­ğŸ‡º","code":"HU"},
  "IC":{"name":"Canary Islands","flag":"ğŸ‡®ğŸ‡¨","code":"IC"},
  "ID":{"name":"Indonesia","flag":"ğŸ‡®ğŸ‡©","code":"ID"},
  "IE":{"name":"Ireland","flag":"ğŸ‡®ğŸ‡ª","code":"IE"},
  "IL":{"name":"Israel","flag":"ğŸ‡®ğŸ‡±","code":"IL"},
  "IM":{"name":"Isle of Man","flag":"ğŸ‡®ğŸ‡²","code":"IM"},
  "IN":{"name":"India","flag":"ğŸ‡®ğŸ‡³","code":"IN"},
  "IO":{"name":"British Indian Ocean Territory","flag":"ğŸ‡®ğŸ‡´","code":"IO"},
  "IQ":{"name":"Iraq","flag":"ğŸ‡®ğŸ‡¶","code":"IQ"},
  "IR":{"name":"Iran","flag":"ğŸ‡®ğŸ‡·","code":"IR"},
  "IS":{"name":"Iceland","flag":"ğŸ‡®ğŸ‡¸","code":"IS"},
  "IT":{"name":"Italy","flag":"ğŸ‡®ğŸ‡¹","code":"IT"},
  "JE":{"name":"Jersey","flag":"ğŸ‡¯ğŸ‡ª","code":"JE"},
  "JM":{"name":"Jamaica","flag":"ğŸ‡¯ğŸ‡²","code":"JM"},
  "JO":{"name":"Jordan","flag":"ğŸ‡¯ğŸ‡´","code":"JO"},
  "JP":{"name":"Japan","flag":"ğŸ‡¯ğŸ‡µ","code":"JP"},
  "KE":{"name":"Kenya","flag":"ğŸ‡°ğŸ‡ª","code":"KE"},
  "KG":{"name":"Kyrgyzstan","flag":"ğŸ‡°ğŸ‡¬","code":"KG"},
  "KH":{"name":"Cambodia","flag":"ğŸ‡°ğŸ‡­","code":"KH"},
  "KI":{"name":"Kiribati","flag":"ğŸ‡°ğŸ‡®","code":"KI"},
  "KM":{"name":"Comoros","flag":"ğŸ‡°ğŸ‡²","code":"KM"},
  "KN":{"name":"St. Kitts & Nevis","flag":"ğŸ‡°ğŸ‡³","code":"KN"},
  "KP":{"name":"North Korea","flag":"ğŸ‡°ğŸ‡µ","code":"KP"},
  "KR":{"name":"South Korea","flag":"ğŸ‡°ğŸ‡·","code":"KR"},
  "KW":{"name":"Kuwait","flag":"ğŸ‡°ğŸ‡¼","code":"KW"},
  "KY":{"name":"Cayman Islands","flag":"ğŸ‡°ğŸ‡¾","code":"KY"},
  "KZ":{"name":"Kazakhstan","flag":"ğŸ‡°ğŸ‡¿","code":"KZ"},
  "LA":{"name":"Laos","flag":"ğŸ‡±ğŸ‡¦","code":"LA"},
  "LB":{"name":"Lebanon","flag":"ğŸ‡±ğŸ‡§","code":"LB"},
  "LC":{"name":"St. Lucia","flag":"ğŸ‡±ğŸ‡¨","code":"LC"},
  "LI":{"name":"Liechtenstein","flag":"ğŸ‡±ğŸ‡®","code":"LI"},
  "LK":{"name":"Sri Lanka","flag":"ğŸ‡±ğŸ‡°","code":"LK"},
  "LR":{"name":"Liberia","flag":"ğŸ‡±ğŸ‡·","code":"LR"},
  "LS":{"name":"Lesotho","flag":"ğŸ‡±ğŸ‡¸","code":"LS"},
  "LT":{"name":"Lithuania","flag":"ğŸ‡±ğŸ‡¹","code":"LT"},
  "LU":{"name":"Luxembourg","flag":"ğŸ‡±ğŸ‡º","code":"LU"},
  "LV":{"name":"Latvia","flag":"ğŸ‡±ğŸ‡»","code":"LV"},
  "LY":{"name":"Libya","flag":"ğŸ‡±ğŸ‡¾","code":"LY"},
  "MA":{"name":"Morocco","flag":"ğŸ‡²ğŸ‡¦","code":"MA"},
  "MC":{"name":"Monaco","flag":"ğŸ‡²ğŸ‡¨","code":"MC"},
  "MD":{"name":"Moldova","flag":"ğŸ‡²ğŸ‡©","code":"MD"},
  "ME":{"name":"Montenegro","flag":"ğŸ‡²ğŸ‡ª","code":"ME"},
  "MF":{"name":"St. Martin","flag":"ğŸ‡²ğŸ‡«","code":"MF"},
  "MG":{"name":"Madagascar","flag":"ğŸ‡²ğŸ‡¬","code":"MG"},
  "MH":{"name":"Marshall Islands","flag":"ğŸ‡²ğŸ‡­","code":"MH"},
  "MK":{"name":"Macedonia","flag":"ğŸ‡²ğŸ‡°","code":"MK"},
  "ML":{"name":"Mali","flag":"ğŸ‡²ğŸ‡±","code":"ML"},
  "MM":{"name":"Myanmar (Burma)","flag":"ğŸ‡²ğŸ‡²","code":"MM"},
  "MN":{"name":"Mongolia","flag":"ğŸ‡²ğŸ‡³","code":"MN"},
  "MO":{"name":"Macau Sar China","flag":"ğŸ‡²ğŸ‡´","code":"MO"},
  "MP":{"name":"Northern Mariana Islands","flag":"ğŸ‡²ğŸ‡µ","code":"MP"},
  "MQ":{"name":"Martinique","flag":"ğŸ‡²ğŸ‡¶","code":"MQ"},
  "MR":{"name":"Mauritania","flag":"ğŸ‡²ğŸ‡·","code":"MR"},
  "MS":{"name":"Montserrat","flag":"ğŸ‡²ğŸ‡¸","code":"MS"},
  "MT":{"name":"Malta","flag":"ğŸ‡²ğŸ‡¹","code":"MT"},
  "MU":{"name":"Mauritius","flag":"ğŸ‡²ğŸ‡º","code":"MU"},
  "MV":{"name":"Maldives","flag":"ğŸ‡²ğŸ‡»","code":"MV"},
  "MW":{"name":"Malawi","flag":"ğŸ‡²ğŸ‡¼","code":"MW"},
  "MX":{"name":"Mexico","flag":"ğŸ‡²ğŸ‡½","code":"MX"},
  "MY":{"name":"Malaysia","flag":"ğŸ‡²ğŸ‡¾","code":"MY"},
  "MZ":{"name":"Mozambique","flag":"ğŸ‡²ğŸ‡¿","code":"MZ"},
  "NA":{"name":"Namibia","flag":"ğŸ‡³ğŸ‡¦","code":"NA"},
  "NC":{"name":"New Caledonia","flag":"ğŸ‡³ğŸ‡¨","code":"NC"},
  "NE":{"name":"Niger","flag":"ğŸ‡³ğŸ‡ª","code":"NE"},
  "NF":{"name":"Norfolk Island","flag":"ğŸ‡³ğŸ‡«","code":"NF"},
  "NG":{"name":"Nigeria","flag":"ğŸ‡³ğŸ‡¬","code":"NG"},
  "NI":{"name":"Nicaragua","flag":"ğŸ‡³ğŸ‡®","code":"NI"},
  "NL":{"name":"Netherlands","flag":"ğŸ‡³ğŸ‡±","code":"NL"},
  "NO":{"name":"Norway","flag":"ğŸ‡³ğŸ‡´","code":"NO"},
  "NP":{"name":"Nepal","flag":"ğŸ‡³ğŸ‡µ","code":"NP"},
  "NR":{"name":"Nauru","flag":"ğŸ‡³ğŸ‡·","code":"NR"},
  "NU":{"name":"Niue","flag":"ğŸ‡³ğŸ‡º","code":"NU"},
  "NZ":{"name":"New Zealand","flag":"ğŸ‡³ğŸ‡¿","code":"NZ"},
  "OM":{"name":"Oman","flag":"ğŸ‡´ğŸ‡²","code":"OM"},
  "PA":{"name":"Panama","flag":"ğŸ‡µğŸ‡¦","code":"PA"},
  "PE":{"name":"Peru","flag":"ğŸ‡µğŸ‡ª","code":"PE"},
  "PF":{"name":"French Polynesia","flag":"ğŸ‡µğŸ‡«","code":"PF"},
  "PG":{"name":"Papua New Guinea","flag":"ğŸ‡µğŸ‡¬","code":"PG"},
  "PH":{"name":"Philippines","flag":"ğŸ‡µğŸ‡­","code":"PH"},
  "PK":{"name":"Pakistan","flag":"ğŸ‡µğŸ‡°","code":"PK"},
  "PL":{"name":"Poland","flag":"ğŸ‡µğŸ‡±","code":"PL"},
  "PM":{"name":"St. Pierre & Miquelon","flag":"ğŸ‡µğŸ‡²","code":"PM"},
  "PN":{"name":"Pitcairn Islands","flag":"ğŸ‡µğŸ‡³","code":"PN"},
  "PR":{"name":"Puerto Rico","flag":"ğŸ‡µğŸ‡·","code":"PR"},
  "PS":{"name":"Palestinian Territories","flag":"ğŸ‡µğŸ‡¸","code":"PS"},
  "PT":{"name":"Portugal","flag":"ğŸ‡µğŸ‡¹","code":"PT"},
  "PW":{"name":"Palau","flag":"ğŸ‡µğŸ‡¼","code":"PW"},
  "PY":{"name":"Paraguay","flag":"ğŸ‡µğŸ‡¾","code":"PY"},
  "QA":{"name":"Qatar","flag":"ğŸ‡¶ğŸ‡¦","code":"QA"},
  "RE":{"name":"RÃ©union","flag":"ğŸ‡·ğŸ‡ª","code":"RE"},
  "RO":{"name":"Romania","flag":"ğŸ‡·ğŸ‡´","code":"RO"},
  "RS":{"name":"Serbia","flag":"ğŸ‡·ğŸ‡¸","code":"RS"},
  "RU":{"name":"Russia","flag":"ğŸ‡·ğŸ‡º","code":"RU"},
  "RW":{"name":"Rwanda","flag":"ğŸ‡·ğŸ‡¼","code":"RW"},
  "SA":{"name":"Saudi Arabia","flag":"ğŸ‡¸ğŸ‡¦","code":"SA"},
  "SB":{"name":"Solomon Islands","flag":"ğŸ‡¸ğŸ‡§","code":"SB"},
  "SC":{"name":"Seychelles","flag":"ğŸ‡¸ğŸ‡¨","code":"SC"},
  "SD":{"name":"Sudan","flag":"ğŸ‡¸ğŸ‡©","code":"SD"},
  "SE":{"name":"Sweden","flag":"ğŸ‡¸ğŸ‡ª","code":"SE"},
  "SG":{"name":"Singapore","flag":"ğŸ‡¸ğŸ‡¬","code":"SG"},
  "SH":{"name":"St. Helena","flag":"ğŸ‡¸ğŸ‡­","code":"SH"},
  "SI":{"name":"Slovenia","flag":"ğŸ‡¸ğŸ‡®","code":"SI"},
  "SJ":{"name":"Svalbard & Jan Mayen","flag":"ğŸ‡¸ğŸ‡¯","code":"SJ"},
  "SK":{"name":"Slovakia","flag":"ğŸ‡¸ğŸ‡°","code":"SK"},
  "SL":{"name":"Sierra Leone","flag":"ğŸ‡¸ğŸ‡±","code":"SL"},
  "SM":{"name":"San Marino","flag":"ğŸ‡¸ğŸ‡²","code":"SM"},
  "SN":{"name":"Senegal","flag":"ğŸ‡¸ğŸ‡³","code":"SN"},
  "SO":{"name":"Somalia","flag":"ğŸ‡¸ğŸ‡´","code":"SO"},
  "SR":{"name":"Suriname","flag":"ğŸ‡¸ğŸ‡·","code":"SR"},
  "SS":{"name":"South Sudan","flag":"ğŸ‡¸ğŸ‡¸","code":"SS"},
  "ST":{"name":"SÃ£o TomÃ© & PrÃ­ncipe","flag":"ğŸ‡¸ğŸ‡¹","code":"ST"},
  "SV":{"name":"El Salvador","flag":"ğŸ‡¸ğŸ‡»","code":"SV"},
  "SX":{"name":"Sint Maarten","flag":"ğŸ‡¸ğŸ‡½","code":"SX"},
  "SY":{"name":"Syria","flag":"ğŸ‡¸ğŸ‡¾","code":"SY"},
  "SZ":{"name":"Swaziland","flag":"ğŸ‡¸ğŸ‡¿","code":"SZ"},
  "TA":{"name":"Tristan Da Cunha","flag":"ğŸ‡¹ğŸ‡¦","code":"TA"},
  "TC":{"name":"Turks & Caicos Islands","flag":"ğŸ‡¹ğŸ‡¨","code":"TC"},
  "TD":{"name":"Chad","flag":"ğŸ‡¹ğŸ‡©","code":"TD"},
  "TF":{"name":"French Southern Territories","flag":"ğŸ‡¹ğŸ‡«","code":"TF"},
  "TG":{"name":"Togo","flag":"ğŸ‡¹ğŸ‡¬","code":"TG"},
  "TH":{"name":"Thailand","flag":"ğŸ‡¹ğŸ‡­","code":"TH"},
  "TJ":{"name":"Tajikistan","flag":"ğŸ‡¹ğŸ‡¯","code":"TJ"},
  "TK":{"name":"Tokelau","flag":"ğŸ‡¹ğŸ‡°","code":"TK"},
  "TL":{"name":"Timor-Leste","flag":"ğŸ‡¹ğŸ‡±","code":"TL"},
  "TM":{"name":"Turkmenistan","flag":"ğŸ‡¹ğŸ‡²","code":"TM"},
  "TN":{"name":"Tunisia","flag":"ğŸ‡¹ğŸ‡³","code":"TN"},
  "TO":{"name":"Tonga","flag":"ğŸ‡¹ğŸ‡´","code":"TO"},
  "TR":{"name":"Turkey","flag":"ğŸ‡¹ğŸ‡·","code":"TR"},
  "TT":{"name":"Trinidad & Tobago","flag":"ğŸ‡¹ğŸ‡¹","code":"TT"},
  "TV":{"name":"Tuvalu","flag":"ğŸ‡¹ğŸ‡»","code":"TV"},
  "TW":{"name":"Taiwan","flag":"ğŸ‡¹ğŸ‡¼","code":"TW"},
  "TZ":{"name":"Tanzania","flag":"ğŸ‡¹ğŸ‡¿","code":"TZ"},
  "UA":{"name":"Ukraine","flag":"ğŸ‡ºğŸ‡¦","code":"UA"},
  "UG":{"name":"Uganda","flag":"ğŸ‡ºğŸ‡¬","code":"UG"},
  "UM":{"name":"U.S. Outlying Islands","flag":"ğŸ‡ºğŸ‡²","code":"UM"},
  "UN":{"name":"United Nations","flag":"ğŸ‡ºğŸ‡³","code":"UN"},
  "US":{"name":"United States","flag":"ğŸ‡ºğŸ‡¸","code":"US"},
  "UY":{"name":"Uruguay","flag":"ğŸ‡ºğŸ‡¾","code":"UY"},
  "UZ":{"name":"Uzbekistan","flag":"ğŸ‡ºğŸ‡¿","code":"UZ"},
  "VA":{"name":"Vatican City","flag":"ğŸ‡»ğŸ‡¦","code":"VA"},
  "VC":{"name":"St. Vincent & Grenadines","flag":"ğŸ‡»ğŸ‡¨","code":"VC"},
  "VE":{"name":"Venezuela","flag":"ğŸ‡»ğŸ‡ª","code":"VE"},
  "VG":{"name":"British Virgin Islands","flag":"ğŸ‡»ğŸ‡¬","code":"VG"},
  "VI":{"name":"U.S. Virgin Islands","flag":"ğŸ‡»ğŸ‡®","code":"VI"},
  "VN":{"name":"Vietnam","flag":"ğŸ‡»ğŸ‡³","code":"VN"},
  "VU":{"name":"Vanuatu","flag":"ğŸ‡»ğŸ‡º","code":"VU"},
  "WF":{"name":"Wallis & Futuna","flag":"ğŸ‡¼ğŸ‡«","code":"WF"},
  "WS":{"name":"Samoa","flag":"ğŸ‡¼ğŸ‡¸","code":"WS"},
  "XK":{"name":"Kosovo","flag":"ğŸ‡½ğŸ‡°","code":"XK"},
  "YE":{"name":"Yemen","flag":"ğŸ‡¾ğŸ‡ª","code":"YE"},
  "YT":{"name":"Mayotte","flag":"ğŸ‡¾ğŸ‡¹","code":"YT"},
  "ZA":{"name":"South Africa","flag":"ğŸ‡¿ğŸ‡¦","code":"ZA"},
  "ZM":{"name":"Zambia","flag":"ğŸ‡¿ğŸ‡²","code":"ZM"},
  "ZW":{"name":"Zimbabwe","flag":"ğŸ‡¿ğŸ‡¼","code":"ZW"}
}

/**
  Frequently used aliases/misspellings for a fallback
*/
const COUNTRY_ALIASES = [
  [ 'U.S.A.', COUNTRIES['US'] ],
  [ 'U.K.', COUNTRIES['GB'] ],
]

/**
  Country look-up-table (map) generated for fast country look-up
*/
const LUT = new Map()
{
  // Map to all countries
  Object.values(COUNTRIES).forEach(c => {
    LUT.set(c.code.toLowerCase(), c)
    LUT.set(c.name.toLowerCase(), c)

    // Allow generating an alias with "."-s (dots) removed
    if (c.name.indexOf('.') >= 0) COUNTRY_ALIASES.push([ c.name, c])

    // Add a permutation for "&" expanded to "and"
    if (c.name.indexOf('&') >= 0) COUNTRY_ALIASES.push([ c.name.replace(/&/g,'and'), c])
  })

  // Map to all aliases
  COUNTRY_ALIASES.forEach(([from, to]) => {
    LUT.set(from.toLowerCase(), to)

    // If alias contains "."-s, also alias a version with dots removed
    if (from.indexOf('.') >= 0) {
      LUT.set( from.replace(/\./g,'').toLowerCase(), to )
    }
  })
}

/**
  Looks up a country by ISO code or country name and returns
  a copy of the lookup object (to avoid the country database
  to be modified by the caller)
*/
export function getCountry(country) {
  return Object.assign({}, LUT.get(country.toLowerCase()))
}


/**
  The unicode codepoint distance between "Regional Indicator Symbol Letter A"
  and the standard ASCII "Capital A" letter. Since regional indicator symbols
  are congruent with the ASCII letters there is an easy 1-to-1 conversion
  between the country codes (in ASCII) and their flags (expressed as the country
  code with regional indicators, displayed as flags on supporting systems)

  String.fromCodePoint(0x1f1e6) => "ğŸ‡¦"
  String.fromCodePoint(65)      => "A"
  0x1f1e6 - 65 = 127397
*/
const COUNTRY_INDICATOR_TO_ASCII_DIFF = 127397

/**
  Converts the country flag emoji to the ISO code
*/
export function flagToIso(flag) {
  return [
    flag.codePointAt(0)-COUNTRY_INDICATOR_TO_ASCII_DIFF,
    flag.codePointAt(2)-COUNTRY_INDICATOR_TO_ASCII_DIFF
  ].map(
    i => String.fromCodePoint(i)
  ).join('')
}

/**
  Converts the country ISO code into the country flag emoji
*/
export function isoToFlag(iso) {
  return iso.split('').map(
    s => s.charCodeAt(0)+COUNTRY_INDICATOR_TO_ASCII_DIFF
  ).reduce(
    (s, cp) => s+String.fromCodePoint(cp)
  , '')
}
